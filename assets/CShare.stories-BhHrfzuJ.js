import{d as Y,r,q as Z,c as x,v as P,y as m,x as f,J as C,N as ee,F as ae,E as te,L as R,B as y,g as I,G as se,m as O,H as oe,I as re}from"./vue.esm-bundler-D4RNtN6S.js";import{_ as ie}from"./CPopover-Ckywkf40.js";import{_ as U}from"./CButton-CYpEF-bO.js";import{C as L}from"./CIcon-BdIW6TD_.js";import{V as ne}from"./viewport-CtZjWKL5.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Popover-axeHrzq9.js";import"./index-CIE75m1q.js";import"./light-DsB5ODev.js";import"./delegate-AmuGJuoF.js";import"./toString-Vm_cEZ4d.js";import"./Follower-DXtmSYJu.js";import"./use-memo-CglecHn5.js";import"./cssr-ChHp6ynC.js";import"./utils-Dy8q55w_.js";import"./icon-switch.cssr-CS-aOSlJ.js";import"./light-BUP7UYSb.js";import"./use-css-vars-class-BoK1eXI1.js";import"./get-precise-event-target-DhO46Lpt.js";import"./resolve-slot-BBjw-So6.js";import"./index-Bg4fAuci.js";import"./index-L98eAIry.js";import"./Scrollbar-BbWWFAp8.js";import"./fade-in.cssr-DJOFltAV.js";import"./VResizeObserver-DllAtjZA.js";import"./use-rtl-DB_faxJd.js";import"./index-Xn0jilRV.js";import"./light-RknvjviJ.js";import"./get-first-slot-vnode-BHWfc99-.js";import"./flatten-B94A2huW.js";import"./keep-B1eBS8j0.js";import"./use-merged-state-CUYpy2WA.js";import"./use-compitable-B7ANSQOo.js";import"./call-f2ri57Kd.js";import"./Button-CF0RFvFf.js";import"./browser-DLIXj5nt.js";import"./is-browser-DqcmxZSF.js";import"./use-style-DC-6GAXR.js";import"./FadeInExpandTransition-LhRfDe22.js";import"./Loading-Ch5S3HjA.js";import"./use-form-item-BaX4b55j.js";import"./light-CaBpc4YN.js";import"./color-to-class-B0iQgAn2.js";const ce={key:"media",class:"c-share__media-list"},ue={key:"status",class:"c-share__status"},pe="checkmark-circle",de="alert-circle",A=Y({__name:"CShare",props:{data:{},mediaList:{default:()=>["copyLink","telegram","whatsapp","xTwitter","facebook"]},copyTooltipSuccessText:{default:"Copied!"},failedText:{default:"Failed!"},isDisabled:{type:Boolean,default:!1}},setup(l){const D={copyLink:"share-copy",telegram:"share-telegram",whatsapp:"share-whatsapp",xTwitter:"share-xtwitter",facebook:"share-facebook"},i=l,T=r(!1);Z(()=>{const e=window.innerWidth<ne;T.value=window.navigator.share!==void 0&&e});function z(e){return D[e]}const c=r(!1),n=r(!1),u=r(!1),h=r("media"),w=r(!1),b=r(""),S=r(""),v=r(null),$=x(()=>h.value==="media"),W=x(()=>w.value||u.value),j=x(()=>c.value||W.value);function M(){w.value=!1,u.value=!1,v.value!==null&&(clearTimeout(v.value),v.value=null)}function g(){v.value=window.setTimeout(M,1500)}function H(){h.value="status",b.value=i.copyTooltipSuccessText,S.value=pe,w.value=!0}function k(){h.value="status",b.value=i.failedText,S.value=de,u.value=!0}async function G(e){M();try{await window.navigator.clipboard.writeText(e.url),H()}catch{k()}finally{g()}}async function p(e){if(typeof i.data!="function"){e(i.data);return}n.value=!0;try{const t=await i.data();await e(t)}catch{k(),g()}finally{n.value=!1}}function N(){c.value&&(c.value=!1)}function J(){c.value||(h.value="media",c.value=!0)}function K(e){if(N(),e==="copyLink"){p(t=>G(t));return}if(e==="telegram"){p(({url:t,title:a,text:o})=>{const d=`${a??""}${a&&o?`
`:""}${o??""}`,s=new URL("https://t.me/share/url");s.searchParams.append("text",d),s.searchParams.append("url",t),window.open(s)});return}e==="whatsapp"&&p(({url:t,title:a,text:o})=>{const d=`${a??""}${a&&o?`
`:""}${o??""}${a||o?`
`:""}${t}`,s=new URL("https://wa.me/");s.searchParams.append("text",d),window.open(s)}),e==="xTwitter"&&p(({url:t,title:a,text:o})=>{const d=`${a??""}${a&&o?`
`:""}${o??""}`,s=new URL("https://twitter.com/intent/tweet");s.searchParams.append("text",d),s.searchParams.append("url",t),window.open(s)}),e==="facebook"&&p(({url:t})=>{const a=new URL("https://www.facebook.com/sharer/sharer.php");a.searchParams.append("u",t),window.open(a)})}async function Q(){if(!T.value){u.value=!0,g();return}if(typeof i.data!="function"){window.navigator.share(i.data);return}n.value=!0;try{window.navigator.share(await i.data())}catch{k(),g()}finally{n.value=!1}}function E(){if(T.value){Q();return}J()}function X(){$.value&&setTimeout(N)}return(e,t)=>(f(),P(ie,{show:j.value,trigger:"manual",onClickoutside:X},{trigger:m(()=>[O(e.$slots,"default",oe(re({share:E,isLoading:n.value,isDisabled:e.isDisabled})),()=>[y(U,{class:"cart-actions__download",tertiary:"",loading:n.value,disabled:e.isDisabled,onClick:E},{icon:m(()=>[y(L,{"is-inline":!0,name:"share"})]),default:m(()=>[O(e.$slots,"share-button-text",{},()=>[t[0]||(t[0]=I(" Share "))],!0)]),_:3},8,["loading","disabled"])],!0)]),default:m(()=>[$.value||n.value?(f(),C("div",ce,[(f(!0),C(ae,null,te(e.mediaList,a=>(f(),P(U,{key:a,quaternary:"",class:R(["c-share__media-button",`c-share__media-button--${a}`]),circle:"",size:"large",onClick:()=>K(a)},{icon:m(()=>[y(L,{"is-inline":!0,class:"c-share__media-icon",name:z(a)},null,8,["name"])]),_:2},1032,["class","onClick"]))),128))])):n.value?ee("",!0):(f(),C("div",ue,[y(L,{"is-inline":!0,class:R(["c-share__status-icon",{"c-share__status-icon--success":w.value,"c-share__status-icon--error":u.value}]),name:S.value},null,8,["class","name"]),I(" "+se(b.value),1)]))]),_:3},8,["show"]))}}),V=le(A,[["__scopeId","data-v-3cdd3911"]]);A.__docgenInfo={exportName:"default",displayName:"CShare",description:"",tags:{},props:[{name:"data",description:"Title, text and url of content to share",required:!0,type:{name:"ShareData"}},{name:"mediaList",description:`Source of shared content
Options are 'copyLink', 'telegram', 'whatsapp', 'xTwitter' or 'facebook'`,required:!1,type:{name:"Array",elements:[{name:"ShareMedia"}]},defaultValue:{func:!1,value:`() => [
  'copyLink',
  'telegram',
  'whatsapp',
  'xTwitter',
  'facebook',
]`}},{name:"copyTooltipSuccessText",description:"Text that is shown in case of successful copying process",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Copied!'"}},{name:"failedText",description:"Text that is shown in case of share failure",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Failed!'"}},{name:"isDisabled",description:"Wheater Share component is disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],slots:[{name:"default",scoped:!0,bindings:[{name:"share",title:"binding"},{name:"isLoading",title:"binding"},{name:"isDisabled",title:"binding"}]},{name:"share-button-text"}],sourceFiles:["/home/runner/work/npm-pew-pew/npm-pew-pew/src/components/CShare/CShare.vue"]};const ta={title:"Components/Share",component:V,tags:["autodocs"],decorators:[l=>({components:{story:l},template:'<div style="display: flex; justify-content: center; gap: 24px"><story/></div>'})],argTypes:{data:{control:!1},mediaList:{control:"check",options:["copyLink","telegram","whatsapp","xTwitter","facebook"]},default:{control:!1,description:"Default slot"},"share-button-text":{control:!1,description:"Share button text slot"}},parameters:{docs:{description:{component:"CShare is a clickable element that allows users to share content with others. This button facilitates sharing content via social media platforms, messaging apps, or links. The share button is commonly used to increase engagement and make it easier for users to spread content across different networks."}}},render:l=>({components:{CShare:V},setup(){return{args:l,shareData:{url:"http://naive.ui"}}},template:` 
      <CShare
        :data="shareData"
        :media-list="args.mediaList"
        :copy-tooltip-success-text="args.copyTooltipSuccessText"
        :failedText="args.failedText"
        :is-disabled="args.isDisabled"
      />
    `})},_={args:{}};var q,B,F;_.parameters={..._.parameters,docs:{...(q=_.parameters)==null?void 0:q.docs,source:{originalSource:`{
  args: {}
}`,...(F=(B=_.parameters)==null?void 0:B.docs)==null?void 0:F.source}}};const sa=["Default"];export{_ as Default,sa as __namedExportsOrder,ta as default};
