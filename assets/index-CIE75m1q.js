import{j as a}from"./light-DsB5ODev.js";import{o as d,a as c}from"./delegate-AmuGJuoF.js";import{r as x,l as h,w as y,g as I,F as m,C as g,d as z,h as Z,X as b,c as w,t as $}from"./vue.esm-bundler-D4RNtN6S.js";function j(n){const e=x(!!n.value);if(e.value)return h(e);const r=y(n,t=>{t&&(e.value=!0,r())});return h(e)}const S=a("n-drawer-body"),A=a("n-modal-body"),B=a("n-modal-provider"),q=a("n-modal"),F=a("n-popover-body");function p(n,e,r="default"){const t=e[r];if(t===void 0)throw new Error(`[vueuc/${n}]: slot[${r}] is empty.`);return t()}function l(n,e=!0,r=[]){return n.forEach(t=>{if(t!==null){if(typeof t!="object"){(typeof t=="string"||typeof t=="number")&&r.push(I(String(t)));return}if(Array.isArray(t)){l(t,e,r);return}if(t.type===m){if(t.children===null)return;Array.isArray(t.children)&&l(t.children,e,r)}else t.type!==g&&r.push(t)}}),r}function L(n,e,r="default"){const t=e[r];if(t===void 0)throw new Error(`[vueuc/${n}]: slot[${r}] is empty.`);const s=l(t());if(s.length===1)return s[0];throw new Error(`[vueuc/${n}]: slot[${r}] should have exactly one child.`)}const o="@@coContext",M={mounted(n,{value:e,modifiers:r}){n[o]={handler:void 0},typeof e=="function"&&(n[o].handler=e,c("clickoutside",n,e,{capture:r.capture}))},updated(n,{value:e,modifiers:r}){const t=n[o];typeof e=="function"?t.handler?t.handler!==e&&(d("clickoutside",n,t.handler,{capture:r.capture}),t.handler=e,c("clickoutside",n,e,{capture:r.capture})):(n[o].handler=e,c("clickoutside",n,e,{capture:r.capture})):t.handler&&(d("clickoutside",n,t.handler,{capture:r.capture}),t.handler=void 0)},unmounted(n,{modifiers:e}){const{handler:r}=n[o];r&&d("clickoutside",n,r,{capture:e.capture}),n[o].handler=void 0}};function T(n,e){console.error(`[vdirs/${n}]: ${e}`)}class k{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,r){const{elementZIndex:t}=this;if(r!==void 0){e.style.zIndex=`${r}`,t.delete(e);return}const{nextZIndex:s}=this;t.has(e)&&t.get(e)+1===this.nextZIndex||(e.style.zIndex=`${s}`,t.set(e,s),this.nextZIndex=s+1,this.squashState())}unregister(e,r){const{elementZIndex:t}=this;t.has(e)?t.delete(e):r===void 0&&T("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort((r,t)=>r[1]-t[1]),this.nextZIndex=2e3,e.forEach(r=>{const t=r[0],s=this.nextZIndex++;`${s}`!==t.style.zIndex&&(t.style.zIndex=`${s}`)})}}const u=new k,i="@@ziContext",P={mounted(n,e){const{value:r={}}=e,{zIndex:t,enabled:s}=r;n[i]={enabled:!!s,initialized:!1},s&&(u.ensureZIndex(n,t),n[i].initialized=!0)},updated(n,e){const{value:r={}}=e,{zIndex:t,enabled:s}=r,f=n[i].enabled;s&&!f&&(u.ensureZIndex(n,t),n[i].initialized=!0),n[i].enabled=!!s},unmounted(n,e){if(!n[i].initialized)return;const{value:r={}}=e,{zIndex:t}=r;u.unregister(n,t)}},V=z({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:j($(n,"show")),mergedTo:w(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?p("lazy-teleport",this.$slots):Z(b,{disabled:this.disabled,to:this.mergedTo},p("lazy-teleport",this.$slots)):null}});export{V as L,L as a,q as b,M as c,S as d,B as e,p as g,A as m,F as p,P as z};
