import{d as S,h as y,b as A,c as O,w as B,n as C,t as I,r as U,p as V}from"./vue.esm-bundler-D4RNtN6S.js";import{p as N,N as F}from"./Popover-axeHrzq9.js";import{j as L,n as z,l as j,k as P}from"./light-DsB5ODev.js";import{N as D,c as K,m as T}from"./utils-CgJXxSjZ.js";import{k as E}from"./keysOf-HiGXOwLp.js";import{p as k}from"./light-CHA7kYeg.js";import{c as H}from"./create-BYUmyaO5.js";import{u as q}from"./use-css-vars-class-BoK1eXI1.js";import{h as b}from"./happens-in-CM8LO42l.js";import{c as g}from"./call-f2ri57Kd.js";import{o as x}from"./omit-DbnPTcif.js";import{k as G}from"./keep-B1eBS8j0.js";import{c as J}from"./create-ref-setter-C4J8sofl.js";const $=L("n-popselect"),Q=z("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),w={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},R=E(w),W=S({name:"PopselectPanel",props:w,setup(t){const s=A($),{mergedClsPrefixRef:e,inlineThemeDisabled:l}=j(t),h=P("Popselect","-pop-select",Q,k,s.props,e),p=O(()=>H(t.options,K("value","children")));function f(n,u){const{onUpdateValue:i,"onUpdate:value":d,onChange:c}=t;i&&g(i,n,u),d&&g(d,n,u),c&&g(c,n,u)}function r(n){a(n.key)}function o(n){!b(n,"action")&&!b(n,"empty")&&!b(n,"header")&&n.preventDefault()}function a(n){const{value:{getNode:u}}=p;if(t.multiple)if(Array.isArray(t.value)){const i=[],d=[];let c=!0;t.value.forEach(_=>{if(_===n){c=!1;return}const v=u(_);v&&(i.push(v.key),d.push(v.rawNode))}),c&&(i.push(n),d.push(u(n).rawNode)),f(i,d)}else{const i=u(n);i&&f([n],[i.rawNode])}else if(t.value===n&&t.cancelable)f(null,null);else{const i=u(n);i&&f(n,i.rawNode);const{"onUpdate:show":d,onUpdateShow:c}=s.props;d&&g(d,!1),c&&g(c,!1),s.setShow(!1)}C(()=>{s.syncPosition()})}B(I(t,"options"),()=>{C(()=>{s.syncPosition()})});const M=O(()=>{const{self:{menuBoxShadow:n}}=h.value;return{"--n-menu-box-shadow":n}}),m=l?q("select",void 0,M,s.props):void 0;return{mergedTheme:s.mergedThemeRef,mergedClsPrefix:e,treeMate:p,handleToggle:r,handleMenuMousedown:o,cssVars:l?void 0:M,themeClass:m==null?void 0:m.themeClass,onRender:m==null?void 0:m.onRender}},render(){var t;return(t=this.onRender)===null||t===void 0||t.call(this),y(D,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{header:()=>{var s,e;return((e=(s=this.$slots).header)===null||e===void 0?void 0:e.call(s))||[]},action:()=>{var s,e;return((e=(s=this.$slots).action)===null||e===void 0?void 0:e.call(s))||[]},empty:()=>{var s,e;return((e=(s=this.$slots).empty)===null||e===void 0?void 0:e.call(s))||[]}})}}),X=Object.assign(Object.assign(Object.assign(Object.assign({},P.props),x(N,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},N.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),w),ce=S({name:"Popselect",props:X,slots:Object,inheritAttrs:!1,__popover__:!0,setup(t){const{mergedClsPrefixRef:s}=j(t),e=P("Popselect","-popselect",void 0,k,t,s),l=U(null);function h(){var r;(r=l.value)===null||r===void 0||r.syncPosition()}function p(r){var o;(o=l.value)===null||o===void 0||o.setShow(r)}return V($,{props:t,mergedThemeRef:e,syncPosition:h,setShow:p}),Object.assign(Object.assign({},{syncPosition:h,setShow:p}),{popoverInstRef:l,mergedTheme:e})},render(){const{mergedTheme:t}=this,s={theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(e,l,h,p,f)=>{const{$attrs:r}=this;return y(W,Object.assign({},r,{class:[r.class,e],style:[r.style,...h]},G(this.$props,R),{ref:J(l),onMouseenter:T([p,r.onMouseenter]),onMouseleave:T([f,r.onMouseleave])}),{header:()=>{var o,a;return(a=(o=this.$slots).header)===null||a===void 0?void 0:a.call(o)},action:()=>{var o,a;return(a=(o=this.$slots).action)===null||a===void 0?void 0:a.call(o)},empty:()=>{var o,a;return(a=(o=this.$slots).empty)===null||a===void 0?void 0:a.call(o)}})}};return y(F,Object.assign({},x(this.$props,R),s,{internalDeactivateImmediately:!0}),{trigger:()=>{var e,l;return(l=(e=this.$slots).default)===null||l===void 0?void 0:l.call(e)}})}});export{ce as N};
