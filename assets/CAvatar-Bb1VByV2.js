import{d as H,h as k,r as w,b as I,c as z,q as G,e as K,f as D,w as U,v as M,y as J,L as X,A as Y,x as C,m as Q,J as Z,N as ee,F as ne,g as re,G as ae}from"./vue.esm-bundler-D4RNtN6S.js";import{C as te}from"./CIcon-BdIW6TD_.js";import{i as oe}from"./is-browser-DqcmxZSF.js";import{t as se}from"./Tag-C1qgvQqN.js";import{j as ie,n as q,z as le,A as de,f as E,r as B,k as x,l as ue,s as ce}from"./light-DsB5ODev.js";import{a as fe,r as me}from"./resolve-slot-BBjw-So6.js";import{V as pe}from"./VResizeObserver-DllAtjZA.js";import{a as ve}from"./light-qvuNFt7m.js";import{u as he}from"./use-css-vars-class-BoK1eXI1.js";import{c as be}from"./color-to-class-B0iQgAn2.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ye=oe&&"loading"in document.createElement("img");function ze(e={}){var o;const{root:s=null}=e;return{hash:`${e.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(e.threshold)?e.threshold.join(","):(o=e.threshold)!==null&&o!==void 0?o:"0"}`,options:Object.assign(Object.assign({},e),{root:(typeof s=="string"?document.querySelector(s):s)||document.documentElement})}}const P=new WeakMap,T=new WeakMap,A=new WeakMap,Oe=(e,o,s)=>{if(!e)return()=>{};const i=ze(o),{root:u}=i.options;let r;const l=P.get(u);l?r=l:(r=new Map,P.set(u,r));let c,t;r.has(i.hash)?(t=r.get(i.hash),t[1].has(e)||(c=t[0],t[1].add(e),c.observe(e))):(c=new IntersectionObserver(g=>{g.forEach(m=>{if(m.isIntersecting){const h=T.get(m.target),O=A.get(m.target);h&&h(),O&&(O.value=!0)}})},i.options),c.observe(e),t=[c,new Set([e])],r.set(i.hash,t));let f=!1;const v=()=>{f||(T.delete(e),A.delete(e),f=!0,t[1].has(e)&&(t[0].unobserve(e),t[1].delete(e)),t[1].size<=0&&r.delete(i.hash),r.size||P.delete(u))};return T.set(e,v),A.set(e,s),v},ke=ie("n-avatar-group"),we=q("avatar",`
 width: var(--n-merged-size);
 height: var(--n-merged-size);
 color: #FFF;
 font-size: var(--n-font-size);
 display: inline-flex;
 position: relative;
 overflow: hidden;
 text-align: center;
 border: var(--n-border);
 border-radius: var(--n-border-radius);
 --n-merged-color: var(--n-color);
 background-color: var(--n-merged-color);
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[le(E("&","--n-merged-color: var(--n-color-modal);")),de(E("&","--n-merged-color: var(--n-color-popover);")),E("img",`
 width: 100%;
 height: 100%;
 `),B("text",`
 white-space: nowrap;
 display: inline-block;
 position: absolute;
 left: 50%;
 top: 50%;
 `),q("icon",`
 vertical-align: bottom;
 font-size: calc(var(--n-merged-size) - 6px);
 `),B("text","line-height: 1.25")]),je=Object.assign(Object.assign({},x.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),Fe=H({name:"Avatar",props:je,slots:Object,setup(e){const{mergedClsPrefixRef:o,inlineThemeDisabled:s}=ue(e),i=w(!1);let u=null;const r=w(null),l=w(null),c=()=>{const{value:n}=r;if(n&&(u===null||u!==n.innerHTML)){u=n.innerHTML;const{value:a}=l;if(a){const{offsetWidth:d,offsetHeight:b}=a,{offsetWidth:p,offsetHeight:S}=n,j=.9,R=Math.min(d/p*j,b/S*j,1);n.style.transform=`translateX(-50%) translateY(-50%) scale(${R})`}}},t=I(ke,null),f=z(()=>{const{size:n}=e;if(n)return n;const{size:a}=t||{};return a||"medium"}),v=x("Avatar","-avatar",we,ve,e,o),g=I(se,null),m=z(()=>{if(t)return!0;const{round:n,circle:a}=e;return n!==void 0||a!==void 0?n||a:g?g.roundRef.value:!1}),h=z(()=>t?!0:e.bordered||!1),O=z(()=>{const n=f.value,a=m.value,d=h.value,{color:b}=e,{self:{borderRadius:p,fontSize:S,color:j,border:R,colorModal:$,colorPopover:N},common:{cubicBezierEaseInOut:_}}=v.value;let L;return typeof n=="number"?L=`${n}px`:L=v.value.self[ce("height",n)],{"--n-font-size":S,"--n-border":d?R:"none","--n-border-radius":a?"50%":p,"--n-color":b||j,"--n-color-modal":b||$,"--n-color-popover":b||N,"--n-bezier":_,"--n-merged-size":`var(--n-avatar-size-override, ${L})`}}),y=s?he("avatar",z(()=>{const n=f.value,a=m.value,d=h.value,{color:b}=e;let p="";return n&&(typeof n=="number"?p+=`a${n}`:p+=n[0]),a&&(p+="b"),d&&(p+="c"),b&&(p+=be(b)),p}),O,e):void 0,F=w(!e.lazy);G(()=>{if(e.lazy&&e.intersectionObserverOptions){let n;const a=K(()=>{n==null||n(),n=void 0,e.lazy&&(n=Oe(l.value,e.intersectionObserverOptions,F))});D(()=>{a(),n==null||n()})}}),U(()=>{var n;return e.src||((n=e.imgProps)===null||n===void 0?void 0:n.src)},()=>{i.value=!1});const V=w(!e.lazy);return{textRef:r,selfRef:l,mergedRoundRef:m,mergedClsPrefix:o,fitTextTransform:c,cssVars:s?void 0:O,themeClass:y==null?void 0:y.themeClass,onRender:y==null?void 0:y.onRender,hasLoadError:i,shouldStartLoading:F,loaded:V,mergedOnError:n=>{if(!F.value)return;i.value=!0;const{onError:a,imgProps:{onError:d}={}}=e;a==null||a(n),d==null||d(n)},mergedOnLoad:n=>{const{onLoad:a,imgProps:{onLoad:d}={}}=e;a==null||a(n),d==null||d(n),V.value=!0}}},render(){var e,o;const{$slots:s,src:i,mergedClsPrefix:u,lazy:r,onRender:l,loaded:c,hasLoadError:t,imgProps:f={}}=this;l==null||l();let v;const g=!c&&!t&&(this.renderPlaceholder?this.renderPlaceholder():(o=(e=this.$slots).placeholder)===null||o===void 0?void 0:o.call(e));return this.hasLoadError?v=this.renderFallback?this.renderFallback():fe(s.fallback,()=>[k("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})]):v=me(s.default,m=>{if(m)return k(pe,{onResize:this.fitTextTransform},{default:()=>k("span",{ref:"textRef",class:`${u}-avatar__text`},m)});if(i||f.src){const h=this.src||f.src;return k("img",Object.assign(Object.assign({},f),{loading:ye&&!this.intersectionObserverOptions&&r?"lazy":"eager",src:r&&this.intersectionObserverOptions?this.shouldStartLoading?h:void 0:h,"data-image-src":h,onLoad:this.mergedOnLoad,onError:this.mergedOnError,style:[f.style||"",{objectFit:this.objectFit},g?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}}),k("span",{ref:"selfRef",class:[`${u}-avatar`,this.themeClass],style:this.cssVars},v,r&&g)}}),W=H({__name:"CAvatar",props:{name:{default:""},bordered:{type:Boolean,default:!1},color:{default:void 0},fallbackSrc:{default:void 0},imgProps:{default:void 0},intersectionObserverOptions:{default:void 0},lazy:{type:Boolean,default:!1},objectFit:{default:"cover"},renderFallback:{type:Function,default:void 0},renderPlaceholder:{type:Function,default:void 0},round:{type:Boolean,default:!1},size:{default:"medium"},src:{default:void 0}},emits:["error"],setup(e,{emit:o}){const s=e,i=o,u=z(()=>s.name.trim().split(" ").map(r=>r[0].toUpperCase()).join(""));return(r,l)=>(C(),M(Y(Fe),{class:X(["c-avatar",`c-avatar--${s.size}`]),name:r.name,bordered:r.bordered,color:r.color,"fallback-src":r.fallbackSrc,"img-props":r.imgProps,"intersection-observer-options":r.intersectionObserverOptions,lazy:r.lazy,"object-fit":r.objectFit,"render-fallback":r.renderFallback,"render-placeholder":r.renderPlaceholder,round:r.round,size:r.size,src:r.src,onFocus:l[0]||(l[0]=c=>i("error",c))},{default:J(()=>[Q(r.$slots,"default",{},()=>[!r.src&&r.name?(C(),Z(ne,{key:0},[re(ae(u.value),1)],64)):r.src?ee("",!0):(C(),M(te,{key:1,class:"c-avatar__icon",name:"person","is-inline":!0}))],!0)]),_:3},8,["class","name","bordered","color","fallback-src","img-props","intersection-observer-options","lazy","object-fit","render-fallback","render-placeholder","round","size","src"]))}}),qe=ge(W,[["__scopeId","data-v-c2ce341c"]]);W.__docgenInfo={exportName:"default",displayName:"CAvatar",description:"",tags:{},props:[{name:"name",description:"The name for the Initials",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"bordered",description:"Whether to display an avatar with a border.",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"color",description:"The background color of the avatar.",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"fallbackSrc",description:"Image URL to show when the avatar fails to load.",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"imgProps",description:"The props of the img element inside the component.",required:!1,type:{name:"ImgHTMLAttributes"},defaultValue:{func:!1,value:"undefined"}},{name:"intersectionObserverOptions",description:"Intersection observer's config to be applied when lazy=true.",required:!1,type:{name:`{
  root?: Element | Document | string | null;
  rootMargin?: string;
  threshold?: number | number[];
}`},defaultValue:{func:!1,value:"undefined"}},{name:"lazy",description:`Load image after it enters viewport.
When used alone, it will be assigned the property value of HTMLImageElement.loading.
Alternatively, it can be used in conjunction with the intersection-observer-options configuration to achieve lazy loading.`,required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"objectFit",description:"Object-fit type of the image in the container.",required:!1,type:{name:"union",elements:[{name:'"fill"'},{name:'"contain"'},{name:'"cover"'},{name:'"none"'},{name:'"scale-down"'}]},defaultValue:{func:!1,value:"'cover'"}},{name:"renderFallback",description:"Render function of fallback content.",required:!1,type:{name:"TSFunctionType"},defaultValue:{func:!1,value:"undefined"}},{name:"renderPlaceholder",description:"Render function of placeholder.",required:!1,type:{name:"TSFunctionType"},defaultValue:{func:!1,value:"undefined"}},{name:"round",description:"Whether to display a rounded avatar.",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"size",description:"Avatar's size.",required:!1,type:{name:"union",elements:[{name:'"small"'},{name:'"medium"'},{name:'"large"'},{name:"number"}]},defaultValue:{func:!1,value:"'medium'"}},{name:"src",description:"Avatar's image source.",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}}],events:[{name:"error",type:{names:["Event"]}}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/npm-pew-pew/npm-pew-pew/src/components/CAvatar/CAvatar.vue"]};export{qe as C};
